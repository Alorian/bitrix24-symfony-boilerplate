# Шаблон приложения Bitrix24 на Symfony

О том что именно сделано и почему подробнее читайте тут
https://verstaem.com/bitrix24/cloud-app-on-symfony/

## Как запустить?

1\. Скачиваем шаблон в какую либо папку

2\. Открываем скачанную папку и выполняем в консоли
```bash
$ composer install
```

3\. Устанавливаем npm пакеты через yarn. Выполняем в консоли
```bash
$ npm install -g yarn
$ yarn install
```

4\. Собираем фронт
```bash
$ yarn encore prod
```

5\. Переименовываем или копируем файл /.env.sample в /.env. 

В переименнованном файле указываем свои данные в переменных 
APP_DOMAIN, DATABASE_URL, B24_APPLICATION_SCOPE, B24_APPLICATION_ID, B24_APPLICATION_SECRET

6\. Настраиваем веб-сервер, чтобы корнем сайта была папка /public

7\. Добавляем локальное приложение на стороне Битрикс24
* В качестве страницы приложения указываем https://ваш_домен/settings
* В качестве страницы установки указываем htttps://ващ_домен/install

## URL приложения
/install - страница установки

/settings - страница настроек

/test - страница добавления тестового действия бизнес процесса

/activities/test - страница обработки действия бизнес процесса

## B24App

В файле /src/Bitrix/B24App.php лежит класс содержащий код автоматического обновления accessToken